<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Administrador de Restaurantes</title>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous"
    />
    <script>
      function filtrarRestaurantes(idInput, idLista) {
        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById(idInput);
        filter = input.value.toUpperCase();
        ul = document.getElementById(idLista);
        li = ul.getElementsByClassName("list-group-item");
        for (i = 0; i < li.length; i++) {
          a = li[i].getElementsByTagName("h5")[0];
          txtValue = a.textContent || a.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            li[i].style.display = "";
          } else {
            li[i].style.display = "none";
          }
        }
      }
    </script>
</head>
<body>
<div class="container mt-5">
    <div th:if="${error}" class="alert alert-danger" role="alert">
        <strong>Error:</strong> <span th:text="${error}"></span>
    </div>
    <h2 class="mb-4">Administraci√≥n de Restaurantes</h2>
    <div class="accordion mb-5" id="accordionDeshabilitados">
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingDeshabilitados">
                <button
                        class="accordion-button"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseDeshabilitados"
                        aria-expanded="true"
                        aria-controls="collapseDeshabilitados"
                >
                    Restaurantes Deshabilitados
                </button>
            </h2>
            <div
                    id="collapseDeshabilitados"
                    class="accordion-collapse collapse show"
                    aria-labelledby="headingDeshabilitados"
                    data-bs-parent="#accordionDeshabilitados"
            >
                <div class="accordion-body">
                    <input
                            class="form-control mb-3"
                            id="buscarDeshabilitados"
                            type="text"
                            placeholder="Buscar en deshabilitados..."
                            onkeyup="filtrarRestaurantes('buscarDeshabilitados', 'listaDeshabilitados')"
                    />
                    <div class="list-group" id="listaDeshabilitados">
                        <div
                                th:each="restaurante : ${restaurantesDeshabilitados}"
                                class="list-group-item"
                        >
                            <div class="row">
                                <div class="col-md-4">
                                    <h5 th:text="${restaurante.nombre}"></h5>
                                    <p th:text="${restaurante.direccion}"></p>
                                    <p>
                                        <strong>Estrellas:</strong>
                                        <span th:text="${restaurante.estrellas}"></span>
                                    </p>
                                </div>
                                <div class="col-md-4">
                                    <form
                                            th:action="@{/restaurantes/habilitar}"
                                            method="post"
                                            class="d-inline"
                                    >
                                        <input
                                                type="hidden"
                                                th:value="${restaurante.id}"
                                                name="id"
                                        />
                                        <button type="submit" class="btn btn-success">
                                            Aceptar
                                        </button>
                                    </form>
                                    <form
                                            th:action="@{/restaurantes/eliminar}"
                                            method="post"
                                            class="d-inline"
                                    >
                                        <input
                                                type="hidden"
                                                th:value="${restaurante.id}"
                                                name="id"
                                        />
                                        <button type="submit" class="btn btn-danger">
                                            Rechazar
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="accordion" id="accordionHabilitados">
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingHabilitados">
                <button
                        class="accordion-button collapsed"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseHabilitados"
                        aria-expanded="false"
                        aria-controls="collapseHabilitados"
                >
                    Restaurantes Habilitados
                </button>
            </h2>
            <div
                    id="collapseHabilitados"
                    class="accordion-collapse collapse"
                    aria-labelledby="headingHabilitados"
                    data-bs-parent="#accordionHabilitados"
            >
                <div class="accordion-body">
                    <input
                            class="form-control mb-3"
                            id="buscarHabilitados"
                            type="text"
                            placeholder="Buscar en habilitados..."
                            onkeyup="filtrarRestaurantes('buscarHabilitados', 'listaHabilitados')"
                    />
                    <div class="list-group" id="listaHabilitados">
                        <div
                                th:each="restaurante : ${restaurantesHabilitados}"
                                class="list-group-item"
                        >
                            <div class="row">
                                <div class="col-md-4">
                                    <h5 th:text="${restaurante.nombre}"></h5>
                                    <p th:text="${restaurante.direccion}"></p>
                                    <p>
                                        <strong>Estrellas:</strong>
                                        <span th:text="${restaurante.estrellas}"></span>
                                    </p>
                                </div>
                                <div class="col-md-4">
                                    <form
                                            th:action="@{/restaurantes/deshabilitar}"
                                            method="post"
                                            class="d-inline"
                                    >
                                        <input
                                                type="hidden"
                                                th:value="${restaurante.id}"
                                                name="id"
                                        />
                                        <button type="submit" class="btn btn-warning">
                                            Deshabilitar
                                        </button>
                                    </form>
                                    <form
                                            th:action="@{/restaurantes/eliminar}"
                                            method="post"
                                            class="d-inline"
                                    >
                                        <input
                                                type="hidden"
                                                th:value="${restaurante.id}"
                                                name="id"
                                        />
                                        <button type="submit" class="btn btn-danger">
                                            Eliminar
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"
    ></script>
</div>
</body>
</html>